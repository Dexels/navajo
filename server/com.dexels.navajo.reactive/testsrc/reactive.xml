<reactive array="Organization">
	<source.sql resource="dummy">
		<param name="query">select * from ORGANIZATION WHERE ORGANIZATIONID='BBBD11T' AND ROWNUM &lt;=1</param>
		<msg.single.msg>
			<dump path="/Users/frank/main.json" />
		</msg.single.msg>
		<msg.mergeSingle.msg>
			<source.sql resource="dummy">
				<param name="query">select * from ORGANIZATIONATTRIBUTE WHERE ORGANIZATIONID = ?</param>
				<parameval>[ORGANIZATIONID]</parameval>
				<msg.single.msg>
					<dump path="/Users/frank/attribute.json" />
				</msg.single.msg>
			</source.sql>
			<reducer>
				<setkv>
					<parameval name="to">[ATTRIBNAME]</parameval>
					<parameval name="value">[ATTRIBVALUE]</parameval>
				</setkv>
				<set>
					<parameval debug="true" name="Count">[@Count]+1</parameval>
				</set>
				<dump path="/Users/frank/reduced.json" />
			</reducer>
			<joiner>
				<!-- <toSubMessage name="Attributes"/> -->
				<set>
					<parameval debug="true" name="Mix">[SHORTNAME]+'-'+[TYPEOFORGANIZATION]+'-'+[@STOCKINGCOLORS]
					</parameval>
				</set>
				<delete name="REMARKS,UPDATEBY,LASTUPDATE" />
			</joiner>
		</msg.mergeSingle.msg>
		<msg.single.msg>
			<dump path="/Users/frank/total.json" />
		</msg.single.msg>
		<msg.stream.event messageName="Club">
			<parameval name="isArray">true</parameval>
		</msg.stream.event>

	</source.sql>
</reactive>