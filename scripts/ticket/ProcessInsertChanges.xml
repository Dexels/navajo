<?xml version="1.0" encoding="UTF-8"?>
<tsl author="Erik van der Weijden" id="ticket/ProcessInsertTicket" notes=""
	repository="$Id$"
	xmlns="http://www.dexels.com/navascript" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.dexels.com/navascript http://www.dexels.com/schema/navascript.xsd">
	<param name="UpdateCount">
		<expression value="0" />
	</param>   


	<map object="com.dexels.navajo.adapter.SQLMap">
		<field name="datasource">
			<expression value="'ticket'" />
		</field>
		<field name="update">
			<expression xml:space="preserve">
                INSERT INTO resource (  
                         tickettreatid
                ,        changename
                ,        changepath
                ,        changeserver
                ,        categoryid                
                )
                VALUES ( ?, ?, ?, ?, ?)
            </expression>

		</field>
        <!-- <message name="SubmitterCondition" condition="[/Person/SubmitterId] != '-1'" mode="ignore"> -->
		<field name="parameter">
			<expression value="[/Changes/TicketTreat]" />
		</field>
        <field name="parameter">
            <expression value="[/Changes/ChangeName]" />
        </field>
        <field name="parameter">
            <expression value="[/Changes/ChangePath]" />
        </field>
        <field name="parameter">
            <expression value="[/Changes/ChangeServer]" />
        </field>
        <field name="parameter">
            <expression value="[/Changes/Category]" />
        </field>        
        
		<field name="doUpdate">
			<expression value="true" />
		</field>
		<param name="UpdateCount">
			<expression value="[/@UpdateCount] + $updateCount" />
		</param>
        
        
	</map>
	<message name="Result">
		<property name="UpdateCount" direction="out" type="integer"
			description="Wijzigingen">
			<expression condition="?[/@UpdateCount] AND [/@UpdateCount] &gt; 0"
				value="[/@UpdateCount]" />
			<expression value="0" />
		</property>
	</message>
</tsl>