<?xml version="1.0" encoding="UTF-8"?>
<tid errorhandler="error" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="tipiscript.xsd">
<!--    <tipi-include location="tipi/vla_classdef.xml"/>-->
    <tipi-include location="com/dexels/navajo/tipi/classdef.xml"/>
    <tipi-include location="com/dexels/navajo/tipi/components/ext/extclassdef.xml"/>
    <tipi-include location="com/dexels/navajo/tipi/actions/actiondef.xml"/>

    <tipi-include location="com/dexels/navajo/tipi/components/echoimpl/echoclassdef.xml"/>
    <tipi-include location="com/dexels/navajo/tipi/actions/actiondef.xml"/>
    <tipi-include location="com/dexels/navajo/tipi/actions/echoactiondef.xml"/>


<tipi-include location="tipi/migrate.xml"/>
    <tipi-include location="tipi/migrate_codetables.xml"/>
    <tipi-include location="tipi/insertmember.xml"/>
    <tipi-include location="tipi/adminusers.xml"/>
    <!--<tipi-include location="tipi/insertmembercontribution.xml"/>-->
    <tipi-include location="tipi/insertmemberactivity.xml"/>
    <tipi-include location="tipi/insertmemberfunction.xml"/>
    <tipi-include location="tipi/inserttrainer.xml"/>
    <tipi-include location="tipi/insertrelation.xml"/>
    <tipi-include location="tipi/mainframesearch.xml"/>
    <tipi-include location="tipi/memberframe.xml"/>
    <tipi-include location="tipi/memberframesearch.xml"/>
    <tipi-include location="tipi/relationframe.xml"/>
    <tipi-include location="tipi/menus.xml"/>
    <tipi-include location="tipi/disclaimer.xml"/>
    <tipi-include location="tipi/synchronization.xml"/>
    <tipi-include location="tipi/help.xml"/>
    <tipi-include location="tipi/certificaat.xml"/>
    <tipi-include location="tipi/info.xml"/>
    <tipi-include location="tipi/system.xml"/>
    <tipi-include location="tipi/contributieProfielenFrame.xml"/>
    <tipi-include location="tipi/importcsv.xml"/>
    <tipi-include location="tipi/ledenlijstprint.xml"/>
    <tipi-include location="tipi/functionarissenprint.xml"/>
    <tipi-include location="tipi/additionalcontact.xml"/>
    <tipi-include location="tipi/clientconfig.xml"/>
    <!-- 'indirect' doesn't require config. -->
    <!--    <client-config config="server.xml" impl="direct" keystore="c:/vladb/'+[/Club/ClubIdentifier]+'.keystore" password=""
        secure="true" storepass="kl1p_g31t" username="ROOT"/>-->
    <!--<client-config server="localhost/sport-tester/servlet/Postman" username="ROOT" password="" />  -->
    <!--<frame-instance centered="true" fullscreen="true" h="600" icon="{resource:/tipi/tipi-icon-small.png}" id="init" menubar="mymenu" name="init" title="&apos;Sportlink Club&apos;" w="800"/>-->
    <component-instance class="transformer" id="transformer"/>
    <component-instance class="copy" id="copy"/>
    <tipi autoload="InitVLAAAP" autoloadDestination="*" centered="true" class="frame"
        fullscreen="true" h="600" icon="{resource:/tipi/tipi-icon-small.png}" name="init"
        title="&apos;Sportlink Club&apos;" w="800">
        <component-instance id="mymenu" name="mymenu"/>
        <layout type="border">
            <tipi-instance class="toolbar" constraint="north" id="toolbar" orientation="horizontal">
                <component-instance class="button" icon="{resource:/tipi/new_member.png}"
                    id="newMemberButton" text="'Nieuw Lid'" tooltip="'Invoegen lid'">
                    <event type="onActionPerformed">
                        <action type="instantiate">
                            <param name="id" value="'insertMemberFrame'"/>
                            <param name="name" value="'insertMemberFrame'"/>
                            <param name="location" value="{component://init/desktop}"/>
                            <param name="force" value="false"/>
                        </action>
                    </event>
                </component-instance>
                <component-instance class="button" icon="{resource:/tipi/new_relation.png}"
                    id="newRelationButton" text="'Nieuwe Relatie'" tooltip="'Invoegen relatie'">
                    <event type="onActionPerformed">
                        <action type="instantiate">
                            <param name="id" value="'insertRelationFrame'"/>
                            <param name="name" value="'insertRelationFrame'"/>
                            <param name="location" value="{component://init/desktop}"/>
                            <param name="force" value="false"/>
                        </action>
                    </event>
                </component-instance>
                <component-instance class="button" icon="{resource:/tipi/search.png}"
                    id="searchScreenButton" text="'Zoekscherm leden'" tooltip="'Zoekscherm leden'">
                    <event type="onActionPerformed">
                        <action type="instantiate">
                            <param name="id" value="'mainFrameSearch'"/>
                            <param name="name" value="'mainFrameSearch'"/>
                            <param name="location" value="{component://init/desktop}"/>
                            <param name="visible" value="true"/>
                            <param name="force" value="false"/>
                        </action>
                        <action type="performTipiMethod">
                            <param name="path" value="{tipi://init/desktop/mainFrameSearch}"/>
                            <param name="name" value="'toFront'"/>
                        </action>
                        <action type="performMethod">
                            <param name="tipipath" value="{tipi://init/desktop/query}"/>
                            <param name="method" value="'vla/InitVLASearchMembers'"/>
                        </action>
                    </event>
                </component-instance>
                <component-instance class="button" icon="{resource:/tipi/print.png}"
                    id="printButton" text="'Printen'" tooltip="'Afdrukken ledenlijst'">
                    <event type="onActionPerformed">
                        <action type="instantiate">
                            <param name="id" value="'memberPrint'"/>
                            <param name="name" value="'memberPrint'"/>
                            <param name="location" value="{component://init/desktop}"/>
                        </action>
                        <action type="performTipiMethod">
                            <param name="path" value="{tipi://init/desktop/memberPrint}"/>
                            <param name="name" value="'show'"/>
                        </action>
                    </event>
                </component-instance>
                <component-instance class="button" icon="{resource:/tipi/export.png}"
                    id="exportButton" text="'Exporteren'" tooltip="'Exporteren ledengegevens'">
                    <event type="onActionPerformed">
                        <action type="instantiate">
                            <param name="id" value="'exportdialog'"/>
                            <param name="name" value="'exportdialog'"/>
                            <param name="location" value="{component://init/desktop}"/>
                            <param name="visible" value="true"/>
                            <param name="force" value="true"/>
                        </action>
                    </event>
                </component-instance>
                <component-instance class="button" icon="{resource:/tipi/synchronize.png}"
                    id="transferButton" text="'Gegevens uitwisselen'" tooltip="'Synchroniseer'">
                    <event type="onActionPerformed">
                        <action type="instantiate">
                            <param name="id" value="'synchronizationWindow'"/>
                            <param name="name" value="'synchronizationWindow'"/>
                            <param name="location" value="{component://init/desktop}"/>
                            <param name="force" value="true"/>
                        </action>
                        <action type="performTipiMethod">
                            <param name="path" value="{tipi://init/desktop/synchronizationWindow}"/>
                            <param name="name" value="'show'"/>
                        </action>
                    </event>
                </component-instance>
                <!--          <component-instance class="hidden" id='hhh'/>
                 <tipi-instance id="activity" class="activitybar" busyicon="{resource:/tipi/hourglass-a.gif}" freeicon="{resource:/tipi/skulla.gif}"/>
-->
                <!--<component-instance name="clubMagazine" class="button" text="'Clubblad'" icon="{resource:/tipi/export.png}">
          <event type="onActionPerformed">
            <action type="performMethod">
              <param name="tipipath" value="tipi://init/desktop/memberFrameSearch/overview"/>
              <param name="method" value="vla/ProcessVLASendClubMagazine"/>
            </action>
          </event>
        </component-instance>-->
            </tipi-instance>
            <tipi-instance class="desktop" constraint="center" id="desktop">
                <component-instance class="printer" id="printer"/>
                <tipi-instance closable="true" id="memberFrameSearch" name="memberFrameSearch"
                    visible="false" x="10" y="10"/>
                <tipi-instance closable="false" id="relationFrame" name="relationFrame"
                    visible="false" x="10" y="10"/>
                <!--             <tipi-instance closable="false" id="memberFrame" name="memberFrame" visible="false"
                    x="10" y="10"/>
                     <tipi-instance id="insertActivityWindow" name="insertActivityWindow"/>
                <tipi-instance id="insertFunctionWindow" name="insertFunctionWindow" visible="false"/>
                <tipi-instance id="insertTrainerWindow" name="insertTrainerWindow" visible="false"/>-->
                <!--<tipi-instance class="messagestore" id="initquerymembers" service="vla/InitVLAQueryMembers">-->
                <tipi-instance id="query" name="query" service="InitClubVLA"/>
            </tipi-instance>
            <tipi-instance class="messagestore" id="disclaimcheck" service="InitVLAAAP" visible="false">
                <event type="onLoad">
                    <action type="performMethod">
                        <param name="tipipath" value="{tipi:/.}"/>
                        <param name="method" value="'vla/InitVLAQueryMembers'"/>
                    </action>
                    <condition>
                        <param name="tipipath" value="tipi:/."/>
                        <param name="expression" value="[/DbStatus/isMigrated] == true"/>
                    </condition>
                </event>
            </tipi-instance>
            <tipi-instance class="messagestore" id="messagestore" service="InitClubVLA" visible="false">
                <event type="onInstantiate">
                    <action type="performMethod">
                        <param name="tipipath" value="{tipi:/.}"/>
                        <param name="method" value="'InitClubVLA'"/>
                    </action>
                </event>
            </tipi-instance>
            <tipi-instance class="messagestore" id="databaseCheck" service="vla/ProcessVLACheckUser" visible="false">
                <event type="onGeneratedErrors">
                    <action type="showInfo">
                        <param name="text" value="'U heeft geen toegang: onjuist certificaat'"/>
                    </action>
                    <action type="exit"/>
                </event>
                <event type="onLoad">
                    <condition>
                        <param name="tipipath" value="tipi:/."/>
                        <param name="expression" value="[/Authenticated/Ok] == false"/>
                        <action type="showInfo">
                            <param name="text" value="'U heeft geen toegang: onjuiste gebruikersgegevens'"/>
                        </action>
                        <action type="exit"/>
                    </condition>
                    <condition>
                        <param name="tipipath" value="tipi:/."/>
                        <param name="expression" value="[/DbStatus/isMigrated] == false"/>
                        <action type="instantiate">
                            <param name="id" value="'disclaimer'"/>
                            <param name="name" value="'disclaimer'"/>
                            <param name="location" value="{component://init}"/>
                        </action>
                        <action type="performTipiMethod">
                            <param name="path" value="{tipi://init/disclaimer}"/>
                            <param name="name" value="'show'"/>
                        </action>
                    </condition>
                    <condition>
                        <param name="tipipath" value="tipi:/."/>
                        <param name="expression" value="[/DbStatus/isMigrated] == true"/>
                        <action type="performMethod">
                            <param name="tipipath" value="{tipi://init/desktop/query}"/>
                            <param name="method" value="'vla/InitVLASearchMembers'"/>
                        </action>
                        <action type="performMethod">
                            <param name="tipipath" value="{tipi://init/desktop/query}"/>
                            <param name="method" value="'vla/ProcessVLAQueryContributionProfiles'"/>
                        </action>
                    </condition>
                </event>
            </tipi-instance>
            <tipi-instance class="messagestore" id="memberData" service="vla/ProcessVLAQueryMember" visible="false"/>
            <tipi-instance class="messagestore" id="clubmag"
                service="vla/ProcessVLASendClubMagazine" visible="false">
                <event type="onLoad">
                    <action type="debug">
                        <param name="type" value="object"/>
                        <param name="value" value="message://.:.:/Bert"/>
                    </action>
                </event>
            </tipi-instance>
            <tipi-instance class="messagestore" id="contributionService" name="contributionService" service="vla/ProcessVLAQueryContributionProfiles">
                <event type="onLoad">
                    <condition>
                        <param name="tipipath" value="tipi:/."/>
                        <param name="expression" value="[/Result/RowCount] &gt; 0"/>
                        <action type="setValue">
                            <param name="to" value="{attributeref://init/mymenu/Contribution:enabled}"/>
                            <param name="from" value="true"/>
                        </action>
                    </condition>
                </event>
            </tipi-instance>
            <tipi-instance class="messagestore" id="printstore"
                service="vla/ProcessVLAGetUpdateRequest" visible="false">
                <event type="onLoad">
                    <action type="debug">
                        <param name="value" value="'Printing LMK'"/>
                    </action>
                    <action type="performTipiMethod">
                        <param name="path" value="{component://init/desktop/printer}"/>
                        <param name="printpath" value="{message://init/printstore:.:/CurrentMemberData}"/>
                        <param name="name" value="'printValue'"/>
                        <param name="xsltFile" value="'tipi/to_lmk.xsl'"/>
                        <param name="valueName" value="'Aap'"/>
                    </action>
                </event>
            </tipi-instance>
        </layout>
        <event type="onWindowClosed">
            <action type="exit"/>
        </event>
        <!--               <event type="onLoad">
                    <condition>
                        <param name="tipipath" value="tipi:/."/>
                        <param name="expression" value="[/DbStatus/isMigrated] == true"/>

            <action type="instantiate">
                <param name="id" value="'disclaimer'"/>
                <param name="name" value="'disclaimer'"/>
                <param name="location" value="{component://init}"/>
            </action>
            <action type="performTipiMethod">
                <param name="path" value="{tipi://init/disclaimer}"/>
                <param name="name" value="'show'"/>
            </action>

                    <action type="showInfo">
                        <param name="text" value="'Hooooooooooi'"/>
                    </action>
                  </condition>
                </event>-->
        <component-instance class="transformer" id="transformer"/>
        <component-instance class="copy" id="copy"/>
    </tipi>
    <tipi class="tableprinter" name="tableprinter"/>
    <tipi class="dialog" closable="false" h="180" icon="{resource:/tipi/tipi-icon-small.png}"
        modal="true" name="query" service="vla/InitVLAQueryMembers" title="'Login'" visible="true"
        w="400" x="100" y="100">
        <layout type="table">
            <tr>
                <td left="5" right="5" weighty="0">
                    <component-instance capitalization="upper" class="property" id="ClubIdentifier" propertyname="'/Club/ClubIdentifier'"/>
                </td>
            </tr>
            <tr>
                <td left="5" right="5" weighty="0">
                    <component-instance class="property" id="Username" propertyname="'/UserData/Username'"/>
                </td>
            </tr>
            <tr>
                <td left="5" right="5" weighty="0">
                    <component-instance class="property" id="Password" propertyname="'/UserData/Password'"/>
                </td>
            </tr>
            <tr>
                <td right="5" weightx="0" weighty="0">
                    <component-instance id="login" name="LoginButtonSearch" text="'Login'" tooltip="'Inloggen'"/>
                </td>
            </tr>
        </layout>
        <event type="onLoad">
            <action type="performTipiMethod">
                <param name="path" value="{tipi:/.}"/>
                <param name="name" value="'show'"/>
            </action>
        </event>
    </tipi>
    <component class="button" name="LoginButtonSearch">
        <event type="onActionPerformed">
            <action type="setValue">
                <param name="to" value="{propertyref://init/messagestore:.:/Club/ClubIdentifier}"/>
                <param name="from" value="{attribute://init/desktop/query/ClubIdentifier:propertyValue}"/>
            </action>
            <action type="performTipiMethod">
                <param name="path" value="{tipi:/..}"/>
                <param name="name" value="'hide'"/>
            </action>
            <action type="instantiate">
                <param name="id" value="'mainFrameSearch'"/>
                <param name="name" value="'mainFrameSearch'"/>
                <param name="location" value="{component://init/desktop}"/>
            </action>
            <!-- Is necessary to supply a parameter to this service? COMM: Nope.. works fine.. -->
            <action type="performMethod">
                <param name="tipipath" value="{tipi://init/desktop/query}"/>
                <param name="method" value="'vla/ProcessVLACheckUser'"/>
            </action>
            <action type="setValue">
                <param name="to" value="{attributeref://init:fullscreen}"/>
                <param name="from" value="true"/>
            </action>
        </event>
    </component>
    <tipi class="tipi" closable="true" h="600" name="editmember" resizable="true"
        title="'Lidgegevens'" visible="true" w="800">
        <layout type="border">
            <tipi-instance class="tabs" constraint="" id="tabs">
                <tipi-instance class="tipi" constraint="lid" id="memberdata"/>
            </tipi-instance>
        </layout>
    </tipi>
    <tipi class="exportdialog" h="400" modal="true" name="exportdialog"
        service="vla/ProcessVLASearchMembersExport" title="'Exporteren leden bestand'" w="500"
        x="100" y="100">
        <event type="onInstantiate">
            <action type="performMethod">
                <param name="tipipath" value="{tipi://init/desktop/mainFrameSearch/SearchCriteria}"/>
                <param name="method" value="'vla/ProcessVLASearchMembersExport'"/>
            </action>
        </event>
        <event type="onLoad">
            <action type="setValue">
                <param name="to" value="{attributeref://init/desktop/exportdialog:messagepath}"/>
                <param name="from" value="'/Members'"/>
            </action>
            <action type="performTipiMethod">
                <param name="path" value="{tipi://init/desktop/exportdialog}"/>
                <param name="name" value="'show'"/>
            </action>
        </event>
    </tipi>
</tid>
