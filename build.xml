<?xml version="1.0" encoding="UTF-8" ?>
<!-- $Id$ -->
<project name="NavajoDocument" default="archive" basedir=".">
  <property name="src" location="src"/>
  <property name="build" location="classes"/>
  <property name="lib" value="lib"/>
  <property name="base.archive" value="NavajoDocument.jar"/>
  <property name="nano.archive" value="NanoImpl.jar"/>
  <property name="jaxp.archive" value="jaxpimpl.jar"/>
  <property name="navajo.base" value="com/dexels/navajo"/>
  <property name="document.base" value="${navajo.base}/document"/>
  <property name="persistence.base" value="${navajo.base}/persistence"/>
  <property name="DexelsVersionControl" value="${PROJECTHOME}/DexelsVersionControl"/>
  <property name="DexelsVersionControl.build" value="${PROJECTHOME}/DexelsVersionControl/classes"/>
  <fileset/>
  <path id="depend">
 <!--   <fileset dir="${lib}">
      <include name="**/*.jar"/>
    </fileset>-->
  </path>
   
  <target name="init">
    <tstamp/>
    <mkdir dir="${build}"/>
  </target>
  <target name="clean">
    <delete dir="${build}"/>
  </target>
  <target name="compile" depends="init">
    <javac srcdir="${src}" destdir="${build}">
      <classpath refid="depend"/>
    </javac>
  </target>
  <target name="base" depends="compile">
    <jar jarfile="${base.archive}">
      <fileset dir="${build}">
        <include name="${document.base}/*.class"/>
        <include name="${document.base}/lazy/**/*.class"/>
        <include name="${document.base}/typecheck/**/*.class"/>
        <include name="${document.base}/types/**/*.class"/>
        <include name="${document.base}/databinding/**/*.class"/>
        <include name="${document.base}/base/**/*.class"/>
        <include name="${document.base}/saximpl/**/*.class"/>
        <include name="metadata/**/*.class"/>
        <include name="metadata/**/*.txt"/>
       <include name="org/**/*.class"/>
      </fileset>
          <fileset dir="${build}">
        <include name="${persistence.base}/**/*.class"/>
      </fileset>
      <fileset dir="${build}">
        <include name="navajodocument/*.class"/>
      </fileset>
      <fileset dir="${DexelsVersionControl.build}"/>
    </jar>
  </target>
   <path id="test.class.path">
       <pathelement path="${build}"/>
       </path>
    <target name="test" description="Run the JUnit tests">
        <junit printsummary="yes" haltonfailure="yes">
            <classpath refid="test.class.path"/>
            <formatter type="plain"/>
            <test name="NavajoTestSuite" outfile="result"
                todir="/home/arjen"/>
        </junit>
    </target>  
	 <target name="nano" depends="compile">
	    <jar jarfile="${nano.archive}">
	      <fileset dir="${build}">
	        <include name="${document.base}/nanoimpl/**/*.class"/>
	     </fileset>
	      <fileset dir="${build}">
	        <include name="navajodocument/*.class"/>
	      </fileset>
	      <fileset dir="${DexelsVersionControl.build}"/>
	    </jar>
	  </target>
  <target name="jaxp" depends="compile">
    <jar jarfile="${jaxp.archive}">
      <fileset dir="${build}">
        <include name="${document.base}/jaxpimpl/**/*.class"/>
     </fileset>
      <fileset dir="${build}">
        <include name="navajodocument/*.class"/>
      </fileset>
      <fileset dir="${DexelsVersionControl.build}"/>
    </jar>
  </target>
  <target name="archive" depends="test,base,nano,jaxp"/>
</project>
<!-- EOF: $RCSfile$ -->
